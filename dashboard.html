<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard ‚Äî Vrijeplek</title>

  <!-- Fonts + globale stijl -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css?v=ocean3">

  <!-- Pagina-specifieke aankleding -->
  <style>
    :root{
      --o1:#1a66ff; --o2:#0056ff; --ink:#0a2a4a; --muted:#3a4b6a;
      --glass-b: rgba(26,102,255,.18); --glass: rgba(255,255,255,.78);
      --line: rgba(26,102,255,.20); --danger:#e23b3b; --ok:#0fa958;
      --bg-deep:#030b18;
    }

    html,body{height:100%}
    body{
      background:radial-gradient(circle at top, #163a7a 0, #030b18 52%, #020712 100%);
      color:var(--ink);
    }

    .site{
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* Header */
    .site-header{
      position:sticky;
      top:0;
      z-index:40;
      backdrop-filter:blur(22px);
      background:linear-gradient(120deg, rgba(3,11,24,.92), rgba(8,23,54,.96));
      border-bottom:1px solid rgba(255,255,255,.04);
    }
    .header-inner{
      max-width:1180px;
      margin:0 auto;
      padding:10px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .brand-badge{
      width:34px;
      height:34px;
      border-radius:14px;
      background:radial-gradient(circle at 30% 0, #7fd3ff 0, #1a66ff 35%, #001c4a 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 0 0 1px rgba(255,255,255,.12), 0 10px 30px rgba(0,0,0,.6);
      position:relative;
      overflow:hidden;
    }
    .brand-badge::after{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.18), transparent 60%);
      opacity:.7;
    }
    .brand-badge span{
      font-weight:700;
      font-size:17px;
      letter-spacing:.04em;
      color:#fff;
      text-shadow:0 0 10px rgba(0,0,0,.65);
    }
    .brand-text a{
      display:block;
      font-weight:700;
      font-size:20px;
      letter-spacing:.03em;
      color:#f7fbff;
      text-decoration:none;
    }
    .brand-text small{
      display:block;
      font-size:11px;
      color:rgba(255,255,255,.65);
      margin-top:1px;
    }

    .header-actions{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .header-pill{
      padding:6px 11px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.08);
      font-size:11px;
      color:rgba(255,255,255,.75);
      display:flex;
      align-items:center;
      gap:6px;
      background:linear-gradient(120deg, rgba(255,255,255,.04), rgba(0,0,0,.25));
    }
    .header-pill-dot{
      width:7px;
      height:7px;
      border-radius:50%;
      background:radial-gradient(circle at 30% 0, #5fffba 0, #0fa958 60%, #006233 100%);
      box-shadow:0 0 0 1px rgba(0,0,0,.4), 0 0 12px rgba(15,169,88,.7);
    }
    .header-btn{
      padding:7px 13px;
      border-radius:999px;
      border:1px solid rgba(104,160,255,.65);
      background:radial-gradient(circle at 0 0, rgba(133,199,255,.45), rgba(0,41,122,1));
      font-size:12px;
      font-weight:600;
      color:#f7fbff;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:6px;
      box-shadow:0 0 0 1px rgba(0,0,0,.6), 0 18px 40px rgba(0,0,0,.85);
    }
    .header-btn span.icon{
      width:18px;
      height:18px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.45);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.3), transparent 60%);
    }

    /* Shell */
    .dash-shell{
      flex:1;
      max-width:1180px;
      margin:18px auto 26px;
      padding:0 16px 20px;
      display:grid;
      grid-template-columns:280px minmax(0,1fr);
      gap:18px;
    }
    @media(max-width:960px){
      .dash-shell{
        grid-template-columns:minmax(0,1fr);
      }
    }

    /* Sidebar */
    .dash-sidebar{
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .card-glass{
      position:relative;
      border-radius:22px;
      background:linear-gradient(135deg, rgba(8,32,72,.92), rgba(5,13,30,.98));
      border:1px solid rgba(120,177,255,.30);
      box-shadow:0 22px 60px rgba(0,0,0,.85);
      overflow:hidden;
    }
    .card-glass::before{
      content:"";
      position:absolute;
      inset:-1px;
      background:
        radial-gradient(circle at 0 0, rgba(127,211,255,.35), transparent 60%),
        radial-gradient(circle at 100% 0, rgba(52,104,255,.35), transparent 55%),
        radial-gradient(circle at 0 100%, rgba(0,0,0,.95), rgba(0,0,0,1));
      mix-blend-mode:screen;
      opacity:.55;
      pointer-events:none;
    }
    .card-glass-inner{
      position:relative;
      padding:16px 16px 15px;
      z-index:1;
    }

    .acct-header{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:10px;
    }
    .acct-avatar{
      width:46px;
      height:46px;
      border-radius:18px;
      background:radial-gradient(circle at 30% 0, #ffe9c0 0, #f6b78c 45%, #d46d4f 100%);
      border:1px solid rgba(255,255,255,.65);
      box-shadow:0 12px 30px rgba(0,0,0,.9);
      position:relative;
      overflow:hidden;
    }
    .acct-avatar::after{
      content:"";
      position:absolute;
      inset:-20%;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.34), transparent 65%);
      opacity:.7;
    }
    .acct-avatar span{
      position:absolute;
      inset:auto 6px 4px auto;
      width:18px;
      height:18px;
      border-radius:999px;
      background:radial-gradient(circle at 30% 0, #7dffbe, #0fa958 55%, #005f32 100%);
      border:1px solid rgba(0,0,0,.7);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      color:#faffff;
      box-shadow:0 0 0 1px rgba(255,255,255,.38), 0 0 15px rgba(5,188,121,.9);
    }
    .acct-main{
      flex:1;
      min-width:0;
    }
    .acct-main h1{
      font-size:15px;
      color:#f8fbff;
      margin:0 0 2px;
    }
    .acct-main p{
      font-size:12px;
      color:rgba(225,233,255,.74);
      margin:0;
    }

    .acct-meta{
      margin:10px 0 0;
      padding:8px 9px;
      border-radius:16px;
      background:linear-gradient(120deg, rgba(2,14,32,.88), rgba(4,27,61,.96));
      border:1px solid rgba(255,255,255,.08);
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .acct-meta-row{
      display:flex;
      justify-content:space-between;
      font-size:11px;
      color:rgba(214,225,255,.82);
    }
    .acct-meta-row span.label{
      opacity:.7;
    }
    .acct-meta-row span.value{
      font-weight:600;
      letter-spacing:.02em;
    }

    .acct-footer{
      margin-top:12px;
      display:flex;
      gap:8px;
    }
    .pill-ghost{
      flex:1;
      padding:7px 9px;
      border-radius:999px;
      border:1px dashed rgba(255,255,255,.38);
      font-size:11px;
      color:rgba(228,234,255,.9);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.08), rgba(0,0,0,.9));
      display:flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      cursor:pointer;
    }
    .pill-ghost span.icon{
      font-size:13px;
    }

    .side-mini{
      padding:11px 12px 12px;
      border-radius:18px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.02), rgba(0,0,0,.95));
      border:1px solid rgba(255,255,255,.06);
      box-shadow:0 18px 40px rgba(0,0,0,.9);
      color:rgba(227,234,255,.88);
      font-size:11px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .side-mini strong{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.12em;
      opacity:.7;
    }
    .side-mini span{
      font-size:11px;
      opacity:.85;
    }

    /* Main */
    .dash-main{
      min-height:0;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    /* Tabs */
    .dash-tabs{
      position:relative;
      display:flex;
      gap:6px;
      padding:6px;
      border-radius:999px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.08), rgba(0,0,0,.95));
      border:1px solid rgba(135,187,255,.45);
      box-shadow:0 18px 40px rgba(0,0,0,.85);
      overflow:hidden;
    }
    .dash-tab{
      flex:1;
      position:relative;
      border-radius:999px;
      padding:7px 10px;
      font-size:12px;
      font-weight:600;
      letter-spacing:.02em;
      color:rgba(219,230,255,.78);
      border:none;
      background:transparent;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      transition:color .18s ease;
    }
    .dash-tab small{
      font-size:10px;
      font-weight:500;
      opacity:.8;
    }
    .dash-tab::after{
      content:"";
      position:absolute;
      inset:3px;
      border-radius:999px;
      background:radial-gradient(circle at 0 0, rgba(143,198,255,.32), rgba(0,51,153,1));
      opacity:0;
      transform:scale(.95);
      transition:opacity .2s ease, transform .2s ease;
      z-index:-1;
    }
    .dash-tab.is-active{
      color:#f8fbff;
      text-shadow:0 0 10px rgba(0,0,0,.6);
    }
    .dash-tab.is-active::after{
      opacity:1;
      transform:scale(1);
    }

    .tab-icon{
      width:18px;
      height:18px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.6);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.4), transparent 60%);
    }

    /* Panels */
    .dash-panels{
      position:relative;
      flex:1;
      min-height:0;
    }
    .dash-panel{
      display:none;
      padding:14px;
      margin-top:4px;
      border-radius:22px;
      border:1px solid rgba(120,177,255,.30);
      background:radial-gradient(circle at 0 0, rgba(127,211,255,.12), rgba(2,11,28,.98));
      box-shadow:0 22px 60px rgba(0,0,0,.9);
      color:rgba(230,236,255,.94);
    }
    .dash-panel.is-active{display:block;}

    .dash-panel-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
      margin-bottom:8px;
    }
    .dash-panel-header h2{
      font-size:15px;
      margin:0;
      color:#f9fbff;
    }
    .dash-panel-header p{
      font-size:12px;
      margin:2px 0 0;
      color:rgba(210,222,255,.85);
    }
    .dash-panel-tag{
      padding:5px 9px;
      border-radius:999px;
      font-size:10px;
      border:1px solid rgba(143,198,255,.8);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.12), rgba(0,0,0,.9));
      display:flex;
      align-items:center;
      gap:6px;
    }

    /* Afspraken lijst (placeholder) */
    .appt-list{
      margin-top:8px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.04), rgba(0,0,0,.9));
      padding:10px;
      font-size:12px;
      color:rgba(220,230,255,.9);
    }
    .appt-empty{
      padding:12px 10px;
      border-radius:14px;
      border:1px dashed rgba(255,255,255,.25);
      text-align:center;
      font-size:12px;
      color:rgba(205,216,245,.88);
    }

    /* OPEN TIJDSTIPPEN */
    .slots-layout{
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);
      gap:14px;
    }
    @media(max-width:960px){
      .slots-layout{
        grid-template-columns:minmax(0,1fr);
      }
    }

    /* Kalender wrapper */
    .calendar-shell{
      position:relative;
      border-radius:18px;
      border:1px solid rgba(149,200,255,.55);
      background:radial-gradient(circle at 0 0, rgba(127,211,255,.18), rgba(3,10,30,.98));
      box-shadow:0 18px 50px rgba(0,0,0,.9);
      overflow:hidden;
    }
    .calendar-shell::before{
      content:"";
      position:absolute;
      inset:-60%;
      background:
        radial-gradient(circle at 0 0, rgba(255,255,255,.24), transparent 60%),
        radial-gradient(circle at 100% 0, rgba(101,164,255,.38), transparent 60%);
      mix-blend-mode:screen;
      opacity:.55;
      pointer-events:none;
    }
    .calendar-inner{
      position:relative;
      z-index:1;
      padding:10px 10px 11px;
      backdrop-filter:blur(18px);
    }
    .cal-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:6px;
      margin-bottom:6px;
    }
    .cal-month-label{
      font-size:13px;
      font-weight:600;
      color:#f7fbff;
      display:flex;
      flex-direction:column;
      gap:1px;
    }
    .cal-month-label span.sub{
      font-size:11px;
      font-weight:500;
      color:rgba(214,226,255,.82);
    }
    .cal-nav{
      display:flex;
      align-items:center;
      gap:6px;
    }
    .cal-nav button{
      width:24px;
      height:24px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.75);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.42), rgba(0,0,0,.85));
      color:#02132e;
      font-size:13px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 0 0 1px rgba(0,0,0,.7);
    }
    .cal-nav button:disabled{
      opacity:.4;
      cursor:default;
    }
    .cal-today-pill{
      padding:5px 9px;
      border-radius:999px;
      border:1px solid rgba(142,198,255,.82);
      font-size:11px;
      color:rgba(229,238,255,.96);
      display:flex;
      align-items:center;
      gap:5px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.2), rgba(0,0,0,.9));
    }
    .cal-today-pill span.dot{
      width:8px;
      height:8px;
      border-radius:999px;
      background:radial-gradient(circle at 30% 0, #7dffbe, #0fa958 60%, #005630 100%);
      box-shadow:0 0 0 1px rgba(0,0,0,.7), 0 0 10px rgba(9,205,130,.9);
    }

    .cal-grid{
      margin-top:6px;
      border-radius:16px;
      padding:8px 8px 9px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.12), rgba(0,0,0,.9));
      border:1px solid rgba(255,255,255,.09);
      box-shadow:inset 0 0 0 1px rgba(0,0,0,.7);
    }
    .cal-weekdays{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:3px;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.11em;
      color:rgba(221,230,255,.82);
      margin-bottom:3px;
    }
    .cal-weekdays span{
      text-align:center;
      opacity:.8;
    }

    .cal-days{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:4px;
      font-size:12px;
    }
    .cal-day{
      position:relative;
      border-radius:999px;
      height:32px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      color:rgba(222,232,255,.92);
      overflow:hidden;
      transform:translateY(0) scale(1);
      transition:
        transform .16s ease,
        box-shadow .16s ease,
        background .16s ease,
        color .16s ease;
    }
    .cal-day::before{
      content:"";
      position:absolute;
      inset:2px;
      border-radius:999px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.18), rgba(0,0,0,.9));
      opacity:0;
      transition:opacity .18s ease;
    }
    .cal-day span{
      position:relative;
      z-index:1;
    }
    .cal-day:hover{
      transform:translateY(-1px) scale(1.02);
      box-shadow:0 6px 15px rgba(0,0,0,.65);
    }
    .cal-day:hover::before{
      opacity:.9;
    }
    .cal-day.is-out{
      opacity:.35;
      cursor:default;
    }
    .cal-day.is-out:hover{
      transform:none;
      box-shadow:none;
    }
    .cal-day.is-today{
      box-shadow:0 0 0 1px rgba(142,198,255,.9), 0 0 16px rgba(80,150,255,.95);
    }
    .cal-day.is-selected{
      background:radial-gradient(circle at 0 0, #7fd3ff, #1a66ff 50%, #001a46 100%);
      color:#fdfdff;
      box-shadow:0 0 0 1px rgba(255,255,255,.92), 0 10px 24px rgba(0,0,0,.8);
      transform:translateY(-1px) scale(1.03);
    }
    .cal-day.is-selected::before{
      opacity:0;
    }

    .cal-legend{
      margin-top:7px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
      font-size:10px;
      color:rgba(213,224,248,.9);
    }
    .cal-leg-dot{
      width:10px;
      height:10px;
      border-radius:999px;
      margin-right:4px;
    }
    .cal-leg-row{
      display:flex;
      align-items:center;
      gap:8px;
    }

    /* Slots detail */
    .slots-shell{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.08), rgba(0,0,0,.96));
      box-shadow:0 20px 50px rgba(0,0,0,.9);
      padding:10px 11px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .slots-head{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:8px;
    }
    .slots-head-main{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .slots-head-main strong{
      font-size:13px;
      color:#f9fbff;
    }
    .slots-head-main span{
      font-size:11px;
      color:rgba(215,226,252,.9);
    }

    .btn-primary{
      border-radius:999px;
      padding:7px 11px;
      border:1px solid rgba(148,205,255,.9);
      background:radial-gradient(circle at 0 0, rgba(143,198,255,.55), rgba(0,29,100,1));
      color:#f9fbff;
      font-size:11px;
      font-weight:600;
      display:flex;
      align-items:center;
      gap:6px;
      cursor:pointer;
      box-shadow:0 0 0 1px rgba(0,0,0,.7), 0 16px 32px rgba(0,0,0,.9);
    }
    .btn-primary span.icon{
      width:18px;
      height:18px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.7);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.45), transparent 60%);
    }

    .slots-form{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap:8px;
      font-size:11px;
    }
    @media(max-width:560px){
      .slots-form{
        grid-template-columns:minmax(0,1fr);
      }
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .field label{
      font-size:11px;
      color:rgba(219,229,255,.9);
    }
    .field-row{
      display:flex;
      gap:6px;
    }
    .field input,
    .field select,
    .field textarea{
      width:100%;
      border-radius:11px;
      border:1px solid rgba(188,205,236,.8);
      background:rgba(4,14,33,.98);
      color:#eef3ff;
      padding:6px 8px;
      font-size:12px;
      outline:none;
      box-shadow:0 0 0 1px rgba(0,0,0,.6);
    }
    .field input::placeholder,
    .field textarea::placeholder{
      color:rgba(160,176,210,.85);
    }
    .field textarea{
      min-height:40px;
      resize:vertical;
    }
    .check-inline{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:11px;
      color:rgba(220,233,255,.9);
    }
    .check-inline input{
      width:auto;
      height:auto;
    }

    .slots-list{
      margin-top:4px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.03), rgba(0,0,0,.92));
      max-height:260px;
      overflow:auto;
    }
    .slot-empty{
      padding:10px;
      font-size:11px;
      color:rgba(209,220,247,.9);
      text-align:center;
    }
    .slot-item{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:8px;
      padding:8px 9px;
      border-bottom:1px solid rgba(255,255,255,.06);
      font-size:11px;
      color:rgba(225,233,255,.95);
    }
    .slot-item:last-child{border-bottom:none;}
    .slot-main{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .slot-time{
      font-size:12px;
      font-weight:600;
    }
    .slot-desc{
      opacity:.86;
    }
    .slot-tags{
      display:flex;
      flex-wrap:wrap;
      gap:4px;
      margin-top:2px;
    }
    .slot-tag{
      padding:3px 6px;
      border-radius:999px;
      border:1px solid rgba(142,198,255,.7);
      font-size:9px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:rgba(215,227,255,.92);
    }
    .slot-actions{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:4px;
      min-width:86px;
    }

    .toggle{
      position:relative;
      width:46px;
      height:22px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.15), rgba(0,0,0,.9));
      cursor:pointer;
      display:flex;
      align-items:center;
      padding:2px;
      box-shadow:0 0 0 1px rgba(0,0,0,.6);
    }
    .toggle-dot{
      width:18px;
      height:18px;
      border-radius:999px;
      background:radial-gradient(circle at 30% 0, #f5f7ff, #c3d2ff 65%, #6b85e5 100%);
      box-shadow:0 0 0 1px rgba(0,0,0,.5), 0 0 12px rgba(127,176,255,.9);
      transform:translateX(0);
      transition:transform .18s ease;
    }
    .toggle.is-on{
      background:radial-gradient(circle at 0 0, #7dffbe, #0fa958 60%, #004827 100%);
      border-color:rgba(175,243,208,.9);
      box-shadow:0 0 0 1px rgba(0,0,0,.6), 0 0 16px rgba(20,201,123,.95);
    }
    .toggle.is-on .toggle-dot{
      transform:translateX(22px);
    }
    .label-muted{
      font-size:10px;
      color:rgba(193,207,234,.88);
    }
    .btn-ghost{
      border-radius:999px;
      padding:4px 8px;
      border:1px solid rgba(255,255,255,.26);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.15), rgba(0,0,0,.9));
      font-size:10px;
      color:rgba(240,244,255,.95);
      cursor:pointer;
    }
    .btn-ghost.danger{
      border-color:rgba(234,108,108,.9);
      color:#ffd8d8;
    }

    .hint-row{
      margin-top:4px;
      display:flex;
      align-items:flex-start;
      gap:8px;
      font-size:10px;
      color:rgba(194,208,238,.95);
    }

    /* WEBSITE tab (builder link) */
    .panel-section{
      margin-top:8px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.06), rgba(0,0,0,.94));
      padding:10px 11px;
      font-size:12px;
      color:rgba(222,232,255,.95);
    }
    .panel-section h3{
      font-size:13px;
      margin:0 0 4px;
      color:#f9fbff;
    }
    .panel-section p{
      margin:0 0 6px;
    }
    .panel-section a.btn-link{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 11px;
      border-radius:999px;
      border:1px solid rgba(143,198,255,.8);
      background:radial-gradient(circle at 0 0, rgba(143,198,255,.4), rgba(0,23,73,1));
      font-size:11px;
      font-weight:600;
      color:#f8fbff;
      text-decoration:none;
      box-shadow:0 0 0 1px rgba(0,0,0,.7), 0 14px 30px rgba(0,0,0,.9);
    }

    /* INSTELLINGEN */
    .settings-grid{
      margin-top:8px;
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:10px;
      font-size:11px;
    }
    @media(max-width:880px){
      .settings-grid{
        grid-template-columns:minmax(0,1fr);
      }
    }
    .settings-group{
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background:radial-gradient(circle at 0 0, rgba(255,255,255,.05), rgba(0,0,0,.95));
      padding:9px 10px 10px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .settings-group h3{
      font-size:12px;
      margin:0 0 2px;
      color:#f8fbff;
    }
    .settings-row{
      display:flex;
      flex-direction:column;
      gap:3px;
    }
    .settings-row label{
      font-size:11px;
      color:rgba(216,228,252,.9);
    }
    .settings-row input,
    .settings-row textarea{
      width:100%;
      border-radius:11px;
      border:1px solid rgba(185,205,236,.9);
      background:rgba(3,12,30,.98);
      color:#f0f4ff;
      padding:6px 8px;
      font-size:12px;
      outline:none;
      box-shadow:0 0 0 1px rgba(0,0,0,.6);
    }
    .settings-row textarea{
      min-height:46px;
      resize:vertical;
    }

    .settings-footer{
      margin-top:9px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      font-size:10px;
      color:rgba(198,211,239,.9);
    }
    .settings-footer button{
      min-width:130px;
    }

    .status-badge{
      border-radius:999px;
      padding:4px 9px;
      border:1px solid rgba(147,204,255,.9);
      background:radial-gradient(circle at 0 0, rgba(143,198,255,.35), rgba(0,0,0,.95));
      font-size:10px;
      color:#eaf2ff;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .status-badge span.dot{
      width:8px;
      height:8px;
      border-radius:999px;
      background:radial-gradient(circle at 30% 0, #7dffbe, #0fa958 60%, #004f2c 100%);
      box-shadow:0 0 0 1px rgba(0,0,0,.7), 0 0 10px rgba(15,169,88,.9);
    }

    .msg{
      margin-top:6px;
      font-size:11px;
    }
    .msg.ok{color:#a6f5c5;}
    .msg.err{color:#ffb3b3;}
  </style>
</head>

<body>
  <div class="site">
    <header class="site-header">
      <div class="header-inner">
        <div class="brand">
          <div class="brand-badge">
            <span>VP</span>
          </div>
          <div class="brand-text">
            <a href="index.html">Vrijeplek</a>
            <small>Dashboard voor ondernemers</small>
          </div>
        </div>

        <div class="header-actions">
          <div class="header-pill">
            <span class="header-pill-dot"></span>
            <span id="header-user-email">Ingelogd</span>
          </div>
          <button class="header-btn" id="logout-btn" type="button">
            <span class="icon">‚èª</span>
            <span>Afmelden</span>
          </button>
        </div>
      </div>
    </header>

    <main class="dash-shell">
      <!-- Zijbalk -->
      <aside class="dash-sidebar">
        <section class="card-glass">
          <div class="card-glass-inner">
            <div class="acct-header">
              <div class="acct-avatar">
                <span>‚òÖ</span>
              </div>
              <div class="acct-main">
                <h1 id="acct-name">Jouw Vrijeplek</h1>
                <p id="acct-subtitle">Laat vandaag nog een leeg tijdslot opvallen.</p>
              </div>
            </div>

            <div class="acct-meta">
              <div class="acct-meta-row">
                <span class="label">Plan</span>
                <span class="value" id="acct-plan">Proefperiode</span>
              </div>
              <div class="acct-meta-row">
                <span class="label">Volgende factuur</span>
                <span class="value" id="acct-next-bill">‚Äî</span>
              </div>
              <div class="acct-meta-row">
                <span class="label">IBAN actief</span>
                <span class="value" id="acct-iban-status">Nog instellen</span>
              </div>
            </div>

            <div class="acct-footer">
              <button type="button" class="pill-ghost" id="go-open-slots">
                <span class="icon">‚óé</span>
                Open tijdstippen
              </button>
              <button type="button" class="pill-ghost" id="go-website">
                <span class="icon">‚öô</span>
                Website
              </button>
            </div>
          </div>
        </section>

        <section class="side-mini">
          <strong>TIP</strong>
          <span>
            Hoe duidelijker jouw omschrijving per tijdslot (vb. ‚ÄúKapper ‚Äî snit & brushing 45 min‚Äù), hoe beter klanten begrijpen wat ze boeken.
          </span>
        </section>

        <section class="side-mini">
          <strong>BETALING</strong>
          <span>
            Vul je IBAN & btw-nummer in bij <b>Instellingen</b>. Klanten ontvangen dan facturen met
            <b>Vrijeplek.be ‚Äì Breeerweg 15A, 3665 As ‚Äì BE0742.671.986</b> als afzender.
          </span>
        </section>
      </aside>

      <!-- Hoofd -->
      <section class="dash-main">
        <!-- Tabs -->
        <div class="dash-tabs" role="tablist">
          <button class="dash-tab is-active" data-tab="appointments" type="button">
            <span class="tab-icon">üìÜ</span>
            Afspraken
            <small>Vandaag & binnenkort</small>
          </button>
          <button class="dash-tab" data-tab="slots" type="button">
            <span class="tab-icon">‚óé</span>
            Open tijdstippen
            <small>Kalender & beheer</small>
          </button>
          <button class="dash-tab" data-tab="website" type="button">
            <span class="tab-icon">üß©</span>
            Website
            <small>Vrijeplek pagina</small>
          </button>
          <button class="dash-tab" data-tab="settings" type="button">
            <span class="tab-icon">‚öô</span>
            Instellingen
            <small>Gegevens & factuur</small>
          </button>
        </div>

        <!-- Panels -->
        <div class="dash-panels">
          <!-- AFSPRAKEN -->
          <section class="dash-panel is-active" data-panel="appointments">
            <div class="dash-panel-header">
              <div>
                <h2>Afspraken</h2>
                <p>Overzicht van ingevulde vrije plekken. Later komt hier je echte afsprakenfeed.</p>
              </div>
              <div class="dash-panel-tag">
                <span>üì° Sync met Vrijeplek.be</span>
              </div>
            </div>

            <div class="appt-list" id="appointments-list">
              <div class="appt-empty">
                Nog geen afspraken getoond.<br>
                Start eerst met <b>Open tijdstippen</b> in te plannen; zodra klanten boeken,
                verschijnen ze hier.
              </div>
            </div>
          </section>

          <!-- OPEN TIJDSTIPPEN -->
          <section class="dash-panel" data-panel="slots">
            <div class="dash-panel-header">
              <div>
                <h2>Open tijdstippen</h2>
                <p>Klik in de kalender, voeg een tijdslot toe en bepaal zelf of het zichtbaar is op Vrijeplek.</p>
              </div>
              <div class="dash-panel-tag">
                <span>‚ú® Live kalender</span>
              </div>
            </div>

            <div class="slots-layout">
              <!-- Kalender -->
              <div class="calendar-shell">
                <div class="calendar-inner">
                  <div class="cal-header">
                    <div class="cal-month-label">
                      <span id="cal-month-label">Maand</span>
                      <span class="sub" id="cal-year-label">Jaar</span>
                    </div>
                    <div class="cal-nav">
                      <button type="button" id="cal-prev" aria-label="Vorige maand">‚Äπ</button>
                      <button type="button" id="cal-next" aria-label="Volgende maand">‚Ä∫</button>
                      <div class="cal-today-pill" id="cal-today-btn">
                        <span class="dot"></span>
                        Vandaag
                      </div>
                    </div>
                  </div>

                  <div class="cal-grid">
                    <div class="cal-weekdays">
                      <span>Ma</span>
                      <span>Di</span>
                      <span>Wo</span>
                      <span>Do</span>
                      <span>Vr</span>
                      <span>Za</span>
                      <span>Zo</span>
                    </div>
                    <div class="cal-days" id="cal-days"></div>
                  </div>

                  <div class="cal-legend">
                    <div class="cal-leg-row">
                      <div class="cal-leg-dot" style="background:radial-gradient(circle at 0 0,#7fd3ff,#1a66ff 50%,#001a46 100%);"></div>
                      <span>Geselecteerde dag</span>
                    </div>
                    <div class="cal-leg-row">
                      <div class="cal-leg-dot" style="background:radial-gradient(circle at 0 0,#7dffbe,#0fa958 60%,#005630 100%);"></div>
                      <span>Vandaag</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Slots detail -->
              <div class="slots-shell">
                <div class="slots-head">
                  <div class="slots-head-main">
                    <strong id="slots-date-label">Geen datum geselecteerd</strong>
                    <span id="slots-date-sub">Klik in de kalender om een dag te kiezen.</span>
                  </div>
                  <button type="button" class="btn-primary" id="btn-new-slot">
                    <span class="icon">Ôºã</span>
                    Nieuw tijdslot
                  </button>
                </div>

                <form class="slots-form" id="slots-form">
                  <div class="field">
                    <label for="slot-start">Start & einduur</label>
                    <div class="field-row">
                      <input type="time" id="slot-start" required>
                      <input type="time" id="slot-end" required>
                    </div>
                  </div>
                  <div class="field">
                    <label for="slot-desc">Omschrijving (zichtbaar voor klant)</label>
                    <textarea id="slot-desc" placeholder="Bv. 'Kapper ‚Äî snit & brushing (45 min)'"></textarea>
                  </div>
                  <div class="field">
                    <label for="slot-capacity">Aantal plaatsen (optioneel)</label>
                    <input type="number" id="slot-capacity" min="1" placeholder="Standaard 1 klant">
                  </div>
                  <div class="field">
                    <label>Instellingen</label>
                    <div class="check-inline">
                      <input type="checkbox" id="slot-active" checked>
                      <label for="slot-active">Zichtbaar op Vrijeplek</label>
                    </div>
                  </div>
                </form>

                <div class="hint-row">
                  <span>üí°</span>
                  <span>
                    Voorbeeld: ‚ÄúVrije plek: tandarts ‚Äî controle (30 min)‚Äù of ‚ÄúVrije plek: gyproc offerte ter plaatse (1u)‚Äù.
                  </span>
                </div>

                <div class="slots-list" id="slots-list">
                  <div class="slot-empty" id="slots-empty">Nog geen tijdstippen voor deze dag.</div>
                </div>
              </div>
            </div>
          </section>

          <!-- WEBSITE -->
          <section class="dash-panel" data-panel="website">
            <div class="dash-panel-header">
              <div>
                <h2>Website</h2>
                <p>Bouw of wijzig je Vrijeplek pagina. Dit is wat klanten zien wanneer ze jouw vrije plek aanklikken.</p>
              </div>
              <div class="dash-panel-tag">
                <span>üß† AI websitebuilder</span>
              </div>
            </div>

            <div class="panel-section">
              <h3>AI Websitebuilder</h3>
              <p>
                Wil je dat Vrijeplek automatisch een stijlvolle pagina voor je maakt?
                Gebruik de builder en kies foto‚Äôs, kleuren en teksten. AI doet de rest.
              </p>
              <a href="builder.html" class="btn-link">
                <span>üß©</span>
                Open de websitebuilder
              </a>
            </div>

            <div class="panel-section">
              <h3>Link naar jouw Vrijeplek</h3>
              <p>
                De publieke link naar jouw pagina wordt later hier zichtbaar.
                Deel deze link in je e-mailhandtekening of op Facebook.
              </p>
              <p style="font-size:11px;opacity:.85;">
                Voorbeeld: <b>https://vrijeplek.be/kapper-janssens</b>
              </p>
            </div>
          </section>

          <!-- INSTELLINGEN -->
          <section class="dash-panel" data-panel="settings">
            <div class="dash-panel-header">
              <div>
                <h2>Instellingen & facturatie</h2>
                <p>
                  Bedrijfsgegevens, IBAN en btw-nummer voor facturen. Alles netjes volgens Belgische regels.
                </p>
              </div>
              <div class="status-badge" id="settings-status">
                <span class="dot"></span>
                Gegevens nog niet opgeslagen
              </div>
            </div>

            <form id="settings-form">
              <div class="settings-grid">
                <div class="settings-group">
                  <h3>Bedrijf</h3>

                  <div class="settings-row">
                    <label for="set-business-name">Bedrijfsnaam</label>
                    <input id="set-business-name" type="text" placeholder="Bv. Kapsalon Els">
                  </div>

                  <div class="settings-row">
                    <label for="set-contact-name">Naam contactpersoon</label>
                    <input id="set-contact-name" type="text" placeholder="Jouw naam">
                  </div>

                  <div class="settings-row">
                    <label for="set-email">E-mailadres voor facturen</label>
                    <input id="set-email" type="email" placeholder="jouw@bedrijf.be">
                  </div>

                  <div class="settings-row">
                    <label for="set-phone">Telefoon / GSM</label>
                    <input id="set-phone" type="tel" placeholder="+32 ‚Ä¶">
                  </div>
                </div>

                <div class="settings-group">
                  <h3>Facturatie</h3>

                  <div class="settings-row">
                    <label for="set-vat">Btw-nummer</label>
                    <input id="set-vat" type="text" placeholder="BE0... (verplicht)">
                  </div>

                  <div class="settings-row">
                    <label for="set-iban">IBAN rekeningnummer</label>
                    <input id="set-iban" type="text" placeholder="BE.. jouw IBAN">
                  </div>

                  <div class="settings-row">
                    <label for="set-bic">BIC (optioneel)</label>
                    <input id="set-bic" type="text" placeholder="Bv. KREDBEBB">
                  </div>

                  <div class="settings-row">
                    <label for="set-invoice-note">Standaard factuurnoot</label>
                    <textarea id="set-invoice-note" placeholder="Bv. 'Betaling binnen 14 dagen op IBAN‚Ä¶'"></textarea>
                  </div>
                </div>

                <div class="settings-group">
                  <h3>Adres</h3>

                  <div class="settings-row">
                    <label for="set-street">Straat + nummer</label>
                    <input id="set-street" type="text" placeholder="Breeerweg 15A">
                  </div>

                  <div class="settings-row">
                    <label for="set-zip">Postcode</label>
                    <input id="set-zip" type="text" placeholder="3665">
                  </div>

                  <div class="settings-row">
                    <label for="set-city">Gemeente</label>
                    <input id="set-city" type="text" placeholder="As">
                  </div>

                  <div class="settings-row">
                    <label for="set-country">Land</label>
                    <input id="set-country" type="text" value="Belgi√´">
                  </div>
                </div>

                <div class="settings-group">
                  <h3>Vrijeplek facturatiegegevens</h3>
                  <div class="settings-row">
                    <label>Afzender op facturen</label>
                    <textarea disabled>Vrijeplek.be
Breeerweg 15A
3665 As
BTW: BE0742.671.986</textarea>
                  </div>
                  <div class="settings-row">
                    <label for="set-extra">Extra info onderaan factuur (optioneel)</label>
                    <textarea id="set-extra" placeholder="Bv. 'Vrijeplek-abonnement wordt automatisch verlengd tenzij opzegging.'"></textarea>
                  </div>
                </div>
              </div>

              <div class="settings-footer">
                <div>
                  Door op <b>Opslaan</b> te klikken, worden je gegevens gebruikt voor
                  facturen en bevestigingsmails naar klanten.
                </div>
                <button type="submit" class="btn-primary">
                  <span class="icon">üíæ</span>
                  Opslaan
                </button>
              </div>
              <div id="settings-msg" class="msg"></div>
            </form>
          </section>
        </div>
      </section>
    </main>
  </div>

  <!-- JS: tabs, kalender, simpele API-calls -->
  <script>
    // BASIC TAB SWITCH
    const tabButtons = document.querySelectorAll('.dash-tab');
    const panels = document.querySelectorAll('.dash-panel');

    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const target = btn.dataset.tab;
        tabButtons.forEach(b => b.classList.toggle('is-active', b === btn));
        panels.forEach(p => p.classList.toggle('is-active', p.dataset.panel === target));
      });
    });

    document.getElementById('go-open-slots').addEventListener('click', () => {
      document.querySelector('.dash-tab[data-tab="slots"]').click();
    });
    document.getElementById('go-website').addEventListener('click', () => {
      document.querySelector('.dash-tab[data-tab="website"]').click();
    });

    // KALENDER
    const calMonthLabel = document.getElementById('cal-month-label');
    const calYearLabel = document.getElementById('cal-year-label');
    const calDaysContainer = document.getElementById('cal-days');
    const calPrev = document.getElementById('cal-prev');
    const calNext = document.getElementById('cal-next');
    const calTodayBtn = document.getElementById('cal-today-btn');

    let today = new Date();
    today.setHours(0,0,0,0);
    let viewDate = new Date(today);
    let selectedDate = new Date(today);

    const monthNames = [
      'januari','februari','maart','april','mei','juni',
      'juli','augustus','september','oktober','november','december'
    ];

    function formatISO(d){
      return d.toISOString().slice(0,10);
    }

    function updateSlotsDateLabel(){
      const label = document.getElementById('slots-date-label');
      const sub = document.getElementById('slots-date-sub');
      if(!selectedDate){
        label.textContent = 'Geen datum geselecteerd';
        sub.textContent = 'Klik in de kalender om een dag te kiezen.';
        return;
      }
      const fmt = selectedDate.toLocaleDateString('nl-BE',{
        weekday:'long', day:'2-digit', month:'long'
      });
      label.textContent = fmt.charAt(0).toUpperCase()+fmt.slice(1);
      sub.textContent = 'Tijdstippen voor ' + formatISO(selectedDate) + '.';
      loadSlotsForSelectedDate();
    }

    function buildCalendar(){
      const year = viewDate.getFullYear();
      const month = viewDate.getMonth();

      calMonthLabel.textContent = monthNames[month].charAt(0).toUpperCase() + monthNames[month].slice(1);
      calYearLabel.textContent = String(year);

      calDaysContainer.innerHTML = '';

      const firstOfMonth = new Date(year, month, 1);
      const startDay = (firstOfMonth.getDay() + 6) % 7; // maandag=0
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      const prevMonthDays = new Date(year, month, 0).getDate();
      const totalCells = Math.ceil((startDay + daysInMonth) / 7) * 7;

      for(let i=0;i<totalCells;i++){
        const cell = document.createElement('button');
        cell.type = 'button';
        cell.className = 'cal-day';

        let dayNum;
        let cellDate;

        if(i < startDay){
          dayNum = prevMonthDays - (startDay - 1 - i);
          cell.classList.add('is-out');
          cellDate = new Date(year, month-1, dayNum);
        }else if(i >= startDay + daysInMonth){
          dayNum = i - (startDay + daysInMonth) + 1;
          cell.classList.add('is-out');
          cellDate = new Date(year, month+1, dayNum);
        }else{
          dayNum = i - startDay + 1;
          cellDate = new Date(year, month, dayNum);
        }

        const span = document.createElement('span');
        span.textContent = dayNum;
        cell.appendChild(span);

        const sameDay = d => d.getFullYear() === cellDate.getFullYear() &&
                              d.getMonth() === cellDate.getMonth() &&
                              d.getDate() === cellDate.getDate();

        if(sameDay(today)){
          cell.classList.add('is-today');
        }
        if(selectedDate && sameDay(selectedDate)){
          cell.classList.add('is-selected');
        }

        if(!cell.classList.contains('is-out')){
          cell.addEventListener('click', () => {
            selectedDate = new Date(cellDate);
            buildCalendar();
            updateSlotsDateLabel();
          });
        }

        calDaysContainer.appendChild(cell);
      }
    }

    calPrev.addEventListener('click', () => {
      viewDate.setMonth(viewDate.getMonth() - 1);
      buildCalendar();
    });
    calNext.addEventListener('click', () => {
      viewDate.setMonth(viewDate.getMonth() + 1);
      buildCalendar();
    });
    calTodayBtn.addEventListener('click', () => {
      viewDate = new Date(today);
      selectedDate = new Date(today);
      buildCalendar();
      updateSlotsDateLabel();
    });

    // SLOTS LOGICA (front-end, met fetch hooks)
    const slotsListEl = document.getElementById('slots-list');
    const slotsEmptyEl = document.getElementById('slots-empty');
    const slotStart = document.getElementById('slot-start');
    const slotEnd = document.getElementById('slot-end');
    const slotDesc = document.getElementById('slot-desc');
    const slotCap = document.getElementById('slot-capacity');
    const slotActive = document.getElementById('slot-active');
    const btnNewSlot = document.getElementById('btn-new-slot');

    // simpele in-memory cache + paddings om later naar backend te sturen
    const localSlots = {}; // { 'YYYY-MM-DD': [ {id, start, end, desc, cap, active} ] }
    let nextSlotId = 1;

    function renderSlots(dateKey){
      const list = localSlots[dateKey] || [];
      slotsListEl.innerHTML = '';
      if(list.length === 0){
        slotsListEl.appendChild(slotsEmptyEl);
        slotsEmptyEl.style.display = 'block';
        return;
      }
      slotsEmptyEl.style.display = 'none';

      list.forEach(slot => {
        const row = document.createElement('div');
        row.className = 'slot-item';

        const main = document.createElement('div');
        main.className = 'slot-main';

        const time = document.createElement('div');
        time.className = 'slot-time';
        time.textContent = slot.start + ' ‚Äì ' + slot.end;

        const desc = document.createElement('div');
        desc.className = 'slot-desc';
        desc.textContent = slot.desc || 'Geen omschrijving';

        const tags = document.createElement('div');
        tags.className = 'slot-tags';

        const tagType = document.createElement('span');
        tagType.className = 'slot-tag';
        tagType.textContent = 'Vrije plek';

        const tagActive = document.createElement('span');
        tagActive.className = 'slot-tag';
        tagActive.textContent = slot.active ? 'Zichtbaar' : 'Verborgen';

        tags.appendChild(tagType);
        tags.appendChild(tagActive);

        main.appendChild(time);
        main.appendChild(desc);
        main.appendChild(tags);

        const actions = document.createElement('div');
        actions.className = 'slot-actions';

        const toggle = document.createElement('div');
        toggle.className = 'toggle' + (slot.active ? ' is-on' : '');
        const dot = document.createElement('div');
        dot.className = 'toggle-dot';
        toggle.appendChild(dot);

        const label = document.createElement('div');
        label.className = 'label-muted';
        label.textContent = slot.active ? 'Zichtbaar' : 'Verborgen';

        toggle.addEventListener('click', () => {
          slot.active = !slot.active;
          label.textContent = slot.active ? 'Zichtbaar' : 'Verborgen';
          toggle.classList.toggle('is-on', slot.active);
          // TODO: stuur update naar backend (Netlify functie)
          // saveSlotsToBackend(dateKey);
        });

        const del = document.createElement('button');
        del.type = 'button';
        del.className = 'btn-ghost danger';
        del.textContent = 'Verwijderen';
        del.addEventListener('click', () => {
          const idx = localSlots[dateKey].findIndex(s => s.id === slot.id);
          if(idx >= 0){
            localSlots[dateKey].splice(idx,1);
            renderSlots(dateKey);
            // TODO backend delete
            // deleteSlotFromBackend(slot.id);
          }
        });

        actions.appendChild(toggle);
        actions.appendChild(label);
        actions.appendChild(del);

        row.appendChild(main);
        row.appendChild(actions);

        slotsListEl.appendChild(row);
      });
    }

    function loadSlotsForSelectedDate(){
      if(!selectedDate) return;
      const key = formatISO(selectedDate);
      renderSlots(key);

      // Hier kan je je Netlify functie aanspreken:
      // fetch('/.netlify/functions/appointments?date=' + key)
      //   .then(r => r.json())
      //   .then(data => { ...localSlots[key] = data.slots; renderSlots(key); });
    }

    btnNewSlot.addEventListener('click', () => {
      if(!selectedDate){
        alert('Kies eerst een datum in de kalender.');
        return;
      }
      if(!slotStart.value || !slotEnd.value){
        alert('Geef start- en einduur in.');
        return;
      }
      const key = formatISO(selectedDate);
      if(!localSlots[key]) localSlots[key] = [];

      localSlots[key].push({
        id: nextSlotId++,
        start: slotStart.value,
        end: slotEnd.value,
        desc: slotDesc.value.trim(),
        cap: slotCap.value ? parseInt(slotCap.value,10) || 1 : 1,
        active: slotActive.checked
      });

      // velden leegmaken
      // slotStart.value = '';
      // slotEnd.value = '';
      slotDesc.value = '';
      slotCap.value = '';

      renderSlots(key);

      // TODO: stuur naar backend (Netlify / Supabase)
      // saveSlotsToBackend(key);
    });

    // INSTELLINGEN (simple placeholder met eventuele Netlify /profile)
    const settingsForm = document.getElementById('settings-form');
    const settingsStatus = document.getElementById('settings-status');
    const settingsMsg = document.getElementById('settings-msg');

    function markSettings(saved){
      if(saved){
        settingsStatus.querySelector('span.dot').style.background =
          'radial-gradient(circle at 30% 0, #7dffbe, #0fa958 60%, #004f2c 100%)';
        settingsStatus.textContent = 'Gegevens opgeslagen';
        settingsStatus.prepend(settingsStatus.querySelector('span.dot'));
      }else{
        settingsStatus.querySelector('span.dot').style.background =
          'radial-gradient(circle at 30% 0, #ffcb7d, #f8943b 60%, #884000 100%)';
        settingsStatus.lastChild && (settingsStatus.lastChild.textContent = 'Gegevens nog niet opgeslagen');
      }
    }

    settingsForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      settingsMsg.textContent = '';
      settingsMsg.className = 'msg';

      const payload = {
        business_name: document.getElementById('set-business-name').value.trim(),
        contact_name: document.getElementById('set-contact-name').value.trim(),
        email: document.getElementById('set-email').value.trim(),
        phone: document.getElementById('set-phone').value.trim(),
        vat: document.getElementById('set-vat').value.trim(),
        iban: document.getElementById('set-iban').value.trim(),
        bic: document.getElementById('set-bic').value.trim(),
        invoice_note: document.getElementById('set-invoice-note').value.trim(),
        street: document.getElementById('set-street').value.trim(),
        zip: document.getElementById('set-zip').value.trim(),
        city: document.getElementById('set-city').value.trim(),
        country: document.getElementById('set-country').value.trim(),
        extra: document.getElementById('set-extra').value.trim()
      };

      try{
        // Verwacht een Netlify functie /profile (pas aan indien anders)
        await fetch('/.netlify/functions/profile', {
          method:'PUT',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify(payload)
        });

        settingsMsg.textContent = 'Instellingen opgeslagen.';
        settingsMsg.classList.add('ok');
        markSettings(true);

        // Sidebar IBAN status bijwerken
        document.getElementById('acct-iban-status').textContent =
          payload.iban ? 'IBAN ingesteld' : 'Nog instellen';
      }catch(err){
        console.error(err);
        settingsMsg.textContent = 'Er liep iets mis bij het opslaan. Controleer je verbinding of probeer opnieuw.';
        settingsMsg.classList.add('err');
      }
    });

    // LOGOUT knop ‚Äì veronderstelt bestaande logout.js / Supabase sessie
    document.getElementById('logout-btn').addEventListener('click', async () => {
      try{
        // Als je Supabase gebruikt via db.js: window.supabaseClient.auth.signOut()
        if(window.supabaseClient){
          await window.supabaseClient.auth.signOut();
        }
      }catch(e){
        console.error(e);
      }finally{
        window.location.href = 'login.html';
      }
    });

    // INIT
    buildCalendar();
    updateSlotsDateLabel();

    // Optioneel: profiel laden via Netlify /profile
    (async function loadProfile(){
      try{
        const res = await fetch('/.netlify/functions/profile');
        if(!res.ok) return;
        const data = await res.json();

        if(data.email){
          document.getElementById('header-user-email').textContent = data.email;
        }
        if(data.business_name){
          document.getElementById('acct-name').textContent = data.business_name;
          document.getElementById('set-business-name').value = data.business_name;
        }
        if(data.contact_name){
          document.getElementById('set-contact-name').value = data.contact_name;
        }
        if(data.email){
          document.getElementById('set-email').value = data.email;
        }
        if(data.phone){
          document.getElementById('set-phone').value = data.phone;
        }
        if(data.vat){
          document.getElementById('set-vat').value = data.vat;
        }
        if(data.iban){
          document.getElementById('set-iban').value = data.iban;
          document.getElementById('acct-iban-status').textContent = 'IBAN ingesteld';
        }
        if(data.bic){
          document.getElementById('set-bic').value = data.bic;
        }
        if(data.invoice_note){
          document.getElementById('set-invoice-note').value = data.invoice_note;
        }
        if(data.street){
          document.getElementById('set-street').value = data.street;
        }
        if(data.zip){
          document.getElementById('set-zip').value = data.zip;
        }
        if(data.city){
          document.getElementById('set-city').value = data.city;
        }
        if(data.country){
          document.getElementById('set-country').value = data.country;
        }
        if(data.extra){
          document.getElementById('set-extra').value = data.extra;
        }

        markSettings(true);
      }catch(e){
        console.warn('Kon profiel niet laden', e);
      }
    })();
  </script>
</body>
</html>
