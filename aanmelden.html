<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Word lid — Vrijeplek.be</title>
  <meta name="description" content="Maak gratis een account aan op Vrijeplek. Activeer daarna je maandelijks of jaarlijks plan en vul je agenda zonder commissie.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">

  <style>
    .auth-wrap {
      margin-top: 24px;
    }

    .signup-hero {
      padding: 8px 0 10px;
    }

    .signup-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.15fr) minmax(0, 0.85fr);
      gap: 24px;
      align-items: flex-start;
    }

    @media (max-width: 960px) {
      .signup-grid {
        grid-template-columns: 1fr;
      }
    }

    .signup-copy h1 {
      margin: 0 0 10px;
      font-size: clamp(24px, 2.4vw, 30px);
    }

    .signup-copy p.lead {
      margin: 0 0 12px;
      font-size: 14px;
      color: #64748b;
      max-width: 480px;
    }

    .plan-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: #f8fafc;
      font-size: 12px;
      font-weight: 700;
      margin-top: 6px;
    }

    .plan-pill span {
      font-weight: 800;
    }

    .steps-list {
      margin: 14px 0 0;
      padding-left: 18px;
      font-size: 13px;
      color: #475569;
    }

    .steps-list li {
      margin: 4px 0;
    }

    .mini-note {
      margin-top: 10px;
      font-size: 12px;
      color: #6b7280;
    }

    .form-panel {
      padding: 18px 18px 20px;
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: #ffffff;
    }

    .form-panel h2 {
      margin: 0 0 8px;
      font-size: 18px;
    }

    .form-panel p.sub {
      margin: 0 0 14px;
      font-size: 13px;
      color: #64748b;
    }

    .signup-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      font-size: 13px;
    }

    .field label {
      display: block;
      font-weight: 600;
      margin-bottom: 3px;
    }

    .field input,
    .field select {
      width: 100%;
      padding: 9px 11px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      font-family: inherit;
      font-size: 13px;
      background: #f8fafc;
      color: #0f172a;
    }

    .field input::placeholder {
      color: #9ca3af;
    }

    .two {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    @media (max-width: 540px) {
      .two {
        grid-template-columns: 1fr;
      }
    }

    .terms-row {
      margin-top: 4px;
    }

    .terms-label {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      font-size: 12px;
      color: #4b5563;
      cursor: pointer;
    }

    .terms-label input {
      margin-top: 2px;
      accent-color: #1d4ed8;
    }

    .terms-label a {
      color: #1d4ed8;
      text-decoration: underline;
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-top: 6px;
      padding: 11px 16px;
      border-radius: 999px;
      border: none;
      background: #1d4ed8;
      color: #ffffff;
      font-weight: 700;
      font-size: 14px;
      cursor: pointer;
      width: 100%;
    }

    .btn-primary:hover {
      filter: brightness(1.05);
    }

    #msg {
      min-height: 18px;
      font-size: 12px;
      margin-top: 4px;
      text-align: center;
    }

    #msg.error {
      color: #dc2626;
      font-weight: 600;
    }

    #msg.ok {
      color: #059669;
      font-weight: 600;
    }

    .form-footnote {
      margin-top: 6px;
      font-size: 11px;
      color: #6b7280;
      text-align: center;
    }

    #plan-note strong {
      font-weight: 800;
    }
  </style>
</head>

<body>
<div class="container">
  <header class="header">
    <div class="brand">
      <div class="logo"></div>
      Vrijeplek<span style="color:#64748b">.be</span>
    </div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="voor-bedrijven.html">Voor bedrijven</a>
      <a href="login.html" class="button ghost" id="nav-login">Login</a>
      <a href="dashboard.html" class="button ghost" id="nav-mijn" style="display:none">Mijn Vrijeplek</a>
      <a href="aanmelden.html" class="cta" aria-current="page">Word lid</a>
    </nav>
  </header>

  <div class="wrap auth-wrap">
    <main>
      <section class="signup-hero">
        <div class="card">
          <div class="signup-grid">
            <div class="signup-copy">
              <div class="kicker">Word lid</div>
              <h1>Word lid van Vrijeplek in 2 stappen.</h1>
              <p class="lead">
                Eerst maak je <strong>gratis</strong> een account. Daarna kies je in je dashboard
                of je maandelijks of jaarlijks wil activeren. Je betaalt pas als je je plan activeert.
              </p>

              <div id="plan-note" class="plan-pill">
                <span>Stap 2-plannen:</span>
                <div>Maandelijks €19,95 • Jaarplan €180 (3 mnd gratis)</div>
              </div>

              <ul class="steps-list">
                <li><strong>Stap 1:</strong> vul hieronder je gegevens in en bevestig via e-mail.</li>
                <li><strong>Stap 2:</strong> log in, activeer je plan en zet je eerste vrije plekken online.</li>
                <li>Maandelijks opzegbaar. Geen commissie per boeking.</li>
              </ul>

              <p class="mini-note">
                Tip: gebruik hetzelfde e-mailadres als voor je facturatie, dan loopt alles netjes samen.
              </p>
            </div>

            <div class="form-panel">
              <h2>Account aanmaken</h2>
              <p class="sub">Account is gratis. Abonnement kies en activeer je later in je dashboard.</p>

              <form id="signup-form" class="signup-form" novalidate>
                <div class="two">
                  <div class="field">
                    <label for="name">Naam</label>
                    <input id="name" type="text" required placeholder="Volledige naam">
                  </div>
                  <div class="field">
                    <label for="company">Bedrijfsnaam</label>
                    <input id="company" type="text" placeholder="Naam van je zaak">
                  </div>
                </div>

                <div class="field">
                  <label for="email">E-mail</label>
                  <input id="email" type="email" required placeholder="naam@voorbeeld.be">
                </div>

                <div class="two">
                  <div class="field">
                    <label for="password">Wachtwoord</label>
                    <input id="password" type="password" required minlength="6" placeholder="Min. 6 tekens">
                  </div>
                  <div class="field">
                    <label for="password2">Herhaal wachtwoord</label>
                    <input id="password2" type="password" required minlength="6" placeholder="Nogmaals wachtwoord">
                  </div>
                </div>

                <div class="two">
                  <div class="field">
                    <label for="phone">Telefoon</label>
                    <input id="phone" type="tel" placeholder="+32 ...">
                  </div>
                  <div class="field">
                    <label for="btw">BTW-nummer</label>
                    <input id="btw" type="text" placeholder="BE0123456789">
                  </div>
                </div>

                <div class="two">
                  <div class="field">
                    <label for="cat">Categorie</label>
                    <select id="cat" required>
                      <option value="">Kies</option>
                      <option value="horeca">Horeca</option>
                      <option value="wellness">Wellness</option>
                      <option value="zorg">Gezondheid</option>
                      <option value="events">Events</option>
                      <option value="poetsdiensten">Poetsdiensten</option>
                      <option value="ramenwasser">Ramenwasser</option>
                      <option value="dieren">Dieren</option>
                    </select>
                  </div>
                  <div class="field">
                    <label for="postcode">Postcode & gemeente</label>
                    <input id="postcode" type="text" placeholder="3500 Hasselt">
                  </div>
                </div>

                <div class="field">
                  <label for="straat">Straat + nr.</label>
                  <input id="straat" type="text" placeholder="Bergstraat 1">
                </div>

                <div class="field terms-row">
                  <label class="terms-label">
                    <input id="terms" type="checkbox" required>
                    <span>Ik ga akkoord met de
                      <a href="terms.html" target="_blank">algemene voorwaarden</a>.
                    </span>
                  </label>
                </div>

                <button type="submit" class="btn-primary">Account aanmaken</button>
                <div id="msg"></div>
                <p class="form-footnote">
                  Na je registratie sturen we een bevestigingsmail. Daarna kun je inloggen en je abonnement activeren.
                </p>
              </form>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer class="footer">
    © <span id="year">2025</span> Vrijeplek.be ·
    <a href="terms.html">Algemene voorwaarden</a>
  </footer>
</div>

<script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.0/dist/umd/supabase.min.js"></script>
<script src="/js/config.js"></script>

<script defer>
  window.addEventListener('DOMContentLoaded', function () {
    var form     = document.getElementById('signup-form');
    var msg      = document.getElementById('msg');
    var planNote = document.getElementById('plan-note');
    var btnLogin = document.getElementById('nav-login');
    var btnMijn  = document.getElementById('nav-mijn');

    if (planNote) {
      var params = new URLSearchParams(window.location.search);
      var plan   = params.get('plan');
      if (plan === 'monthly') {
        planNote.innerHTML =
          '<span>Gekozen plan:</span> ' +
          '<div><strong>Maandelijks</strong> €19,95 • later altijd om te zetten naar jaarplan.</div>';
      } else if (plan === 'yearly') {
        planNote.innerHTML =
          '<span>Gekozen plan:</span> ' +
          '<div><strong>Jaarplan</strong> €180 (3 mnd gratis) • voordeligste optie.</div>';
      }
    }

    function createSupabaseClient() {
      var SUPABASE_URL =
        (window.VRIJEPLEK && window.VRIJEPLEK.SUPABASE_URL) ||
        (window.ENV && window.ENV.SUPABASE_URL) ||
        '';
      var SUPABASE_ANON_KEY =
        (window.VRIJEPLEK && window.VRIJEPLEK.SUPABASE_ANON_KEY) ||
        (window.ENV && window.ENV.SUPABASE_ANON_KEY) ||
        '';

      if (!SUPABASE_URL || !SUPABASE_ANON_KEY ||
          !window.supabase || !window.supabase.createClient) {
        console.error('Supabase/config niet geladen');
        return null;
      }
      return window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    }

    var client = createSupabaseClient();

    if (!client) {
      if (msg) {
        msg.className = 'error';
        msg.textContent = 'Configuratiefout. Herlaad de pagina.';
      }
      return;
    }

    function toggleNav() {
      if (!btnLogin || !btnMijn) return;

      client.auth.getSession()
        .then(function (result) {
          var data  = result.data;
          var error = result.error;

          if (error) {
            console.error('Session check error:', error);
            btnLogin.style.display = 'inline-flex';
            btnMijn.style.display  = 'none';
            return;
          }

          var loggedIn = !!(data && data.session && data.session.user);

          if (loggedIn) {
            btnLogin.style.display = 'none';
            btnMijn.style.display  = 'inline-flex';
          } else {
            btnLogin.style.display = 'inline-flex';
            btnMijn.style.display  = 'none';
          }
        })
        .catch(function (err) {
          console.error('Toggle nav error:', err);
          btnLogin.style.display = 'inline-flex';
          btnMijn.style.display  = 'none';
        });
    }

    toggleNav();
    client.auth.onAuthStateChange(function () {
      toggleNav();
    });

    if (!form || !msg) return;

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      msg.className = '';
      msg.textContent = 'Even geduld…';

      var name  = document.getElementById('name').value.trim();
      var email = document.getElementById('email').value.trim().toLowerCase();
      var pass  = document.getElementById('password').value.trim();
      var pass2 = document.getElementById('password2').value.trim();

      if (pass !== pass2) {
        msg.className = 'error';
        msg.textContent = 'Wachtwoorden komen niet overeen.';
        return;
      }

      if (!document.getElementById('terms').checked) {
        msg.className = 'error';
        msg.textContent = 'Je moet akkoord gaan met de voorwaarden.';
        return;
      }

      client.auth.signUp({
        email: email,
        password: pass,
        options: {
          data: {
            display_name: name,
            bedrijf: document.getElementById('company').value.trim(),
            telefoon: document.getElementById('phone').value.trim(),
            btw: document.getElementById('btw').value.trim(),
            cat: document.getElementById('cat').value,
            straat: document.getElementById('straat').value.trim(),
            postcode: document.getElementById('postcode').value.trim()
          },
          emailRedirectTo: 'https://vrijeplek.be/bedankt.html'
        }
      })
      .then(function (result) {
        var error = result.error;

        if (error) {
          msg.className = 'error';
          msg.textContent = error.message.indexOf('already') !== -1
            ? 'Er bestaat al een account met dit e-mailadres.'
            : 'Registratie mislukt: ' + error.message;
          return;
        }

        msg.className = 'ok';
        msg.textContent = 'Bevestigingsmail verstuurd. Controleer je inbox of spam.';
      })
      .catch(function (err) {
        console.error(err);
        msg.className = 'error';
        msg.textContent = 'Netwerkfout. Probeer opnieuw.';
      });
    });
  });
</script>
</body>
</html>
